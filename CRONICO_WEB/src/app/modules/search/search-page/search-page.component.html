<!-- Header -->
<app-header [title]="'Busqueda'"></app-header>
<!--Banner-->

<form [formGroup]="form" (ngSubmit)="doSearch()" class="mb-0">
  <section id="search" class="normal-padding">
    <div class="row">
      <div class="col">
        <button
          class="button"
          type="button"
          (click)="doClean()"
          style="margin-top: 1px"
        >
          <i class="fas fa-home"></i>
        </button>
      </div>
      <div class="col-11">
        <div class="input-group">
          <input
            type="text"
            name="query"
            id="query"
            formControlName="inputSearch"
            placeholder="Busqueda de insumos y enfermedades"
            class="mb-0 form-control"
          />
          <div _ngcontent-wad-c3="" class="input-group-append">
            <button
              class="button primary icon solid fa-search"
              type="submit"
              style="margin-top: 1px; margin-left: 1px"
            ></button>
          </div>
        </div>
      </div>
    </div>
  </section>
</form>
<!-- Section -->
<section>
  <div class="products">
    <article *ngFor="let item of (state$ | async).search">
      <ng-container *ngIf="item.type === 1">
        <a href="#" class="image"
          ><img src="{{ item.product.images[0].url }}" alt="" class="img-cover"
        /></a>
        <h3>{{ item.product.name }}</h3>
        <p>
          {{ item.product.description }}
        </p>
        <ul class="actions">
          <li>
            <button
              type="button"
              (click)="viewDetails(item.product)"
              class="button"
            >
              Ver
            </button>
          </li>
        </ul>
      </ng-container>
      <ng-container *ngIf="item.type === 2">
        <a href="#" class="image"
          ><img src="{{ item.ailments.images[0].url }}" alt=""
        /></a>
        <h3>{{ item.ailments.name }}</h3>
        <p>
          {{ item.ailments.description }}
        </p>
        <ul class="actions">
          <li>
            <button
              type="button"
              (click)="viewAilmentDetails(item.ailments)"
              class="button"
            >
              Ver
            </button>
          </li>
        </ul>
      </ng-container>
    </article>
  </div>
</section>
<div class="row" *ngIf="(state$ | async).search.length != 0">
  <div class="col-4"></div>
  <div class="col-4">
    <app-pagination
      [totalPages]="(state$ | async).totalPages"
      [currentPage]="(state$ | async).productFilters.page"
      (changePage)="changePage($event)"
    >
    </app-pagination>
  </div>
  <div class="col-4"></div>
</div>
